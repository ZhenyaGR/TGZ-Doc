---
title: Bot
description: "Конструктор для создания логики бота."
---

# **Bot**
Мощный конструктор для создания логики вашего Telegram-бота. Позволяет декларативно описывать, как бот должен реагировать на различные типы входящих обновлений: команды, текстовые сообщения, нажатия на кнопки и т.д.

Использование `Bot` избавляет от необходимости писать громоздкие `if/else` или `switch` конструкции, делая код чистым, читаемым и легко расширяемым.

## Создание экземпляра `Bot`
Класс создается в связке с классом `ZG` и принимает в качестве аргумента экземпляр `ZG`/`null`.

### Создание при использовании Webhook
```php
<?php
require_once __DIR__ . '/vendor/autoload.php';
use ZenithGram\ZenithGram\ZG;
use ZenithGram\ZenithGram\Bot;

// Инициализация для работы через Webhook
$tg = ZG::create(BOT_TOKEN);
$bot = new Bot($tg);

// ... здесь вся логика вашего бота ...

$bot->run();
```

### Создание при использовании LongPoll
```php
<?php
require_once __DIR__ . '/vendor/autoload.php';
use ZenithGram\ZenithGram\LongPoll;
use ZenithGram\ZenithGram\ZG;
use ZenithGram\ZenithGram\Bot;

$lp = LongPoll::create(BOT_TOKEN);
$bot = new Bot(); // Сразу не передаем ZG

// ... здесь вся логика вашего бота ...

$lp->listen(function(ZG $tg) use ($bot) {
    $bot->zg($tg)->run();
});
```

## Основной принцип работы

1.  **Определение маршрутов**: С помощью методов `on...` (например, `onBotCommand`, `onText`) вы "регистрируете" маршруты и указываете, на какое событие они должны сработать.
2.  **Описание действия**: К каждому маршруту вы привязываете действие с помощью цепочки методов (`text`, `img`, `kbd`, `func` и т.д.). Это действие описывает, что бот должен сделать в ответ.
3.  **Запуск роутера**: В конце скрипта вы вызываете метод `run()`, который анализирует пришедшее от Telegram обновление, находит подходящий маршрут и выполняет связанное с ним действие.

## Пример простого бота

```php
<?php
require_once __DIR__ . '/vendor/autoload.php';
use ZenithGram\ZenithGram\ZG;
use ZenithGram\ZenithGram\Bot;

$tg = ZG::create(BOT_TOKEN);
$bot = new Bot($tg);

// --- Определяем маршруты и действия ---

// 1. Приветствие по команде /start
$bot->onBotCommand('start', '/start')
    ->text('Добро пожаловать! Я бот, созданный на ZG.');

// 2. Реакция на простое текстовое сообщение
$bot->onText('how_are_you', 'Как дела?')
    ->text('Все отлично, спасибо что спросили!');

// 3. Создаем кнопку и ее обработчик
$bot->btn('show_help', '❓ Помощь')
    ->edit('Это раздел помощи. Пока тут пусто.');

// 4. Показываем эту кнопку по команде /help
$bot->onBotCommand('help', '/help')
    ->text('Нажмите на кнопку ниже, чтобы получить помощь.')
    ->inlineKbd([
        ['show_help']
    ]);

// 5. Запасной ответ, если команда не распознана
$bot->onDefault()
    ->text('Я не понял вашу команду. Попробуйте /start или /help.');
    
// --- Запускаем ---
$bot->run();
```
