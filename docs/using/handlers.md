---
title: ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
description: "ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² Ð¸Ð· ÐºÐ»Ð°ÑÑÐ° Bot"
sidebarDepth: 0
---

# ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ (ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ)

ÐšÐ»Ð°ÑÑ `Bot` Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð³Ð¸Ð±ÐºÑƒÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ‚Ð¸Ð¿Ð¾Ð² Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¾Ñ‚ Telegram. Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ, ÐºÐ°Ðº Ð±Ð¾Ñ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ñ€ÐµÐ°Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹, Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ, Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº, Ð¼ÐµÐ´Ð¸Ð°Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ.

ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´-Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ "Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚" (route) Ñ Ð·Ð°Ð´Ð°Ð½Ð½Ñ‹Ð¼ ID Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾Ð±ÑŠÐµÐºÑ‚ ÐºÐ»Ð°ÑÑÐ° `Action`, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚ Ð¸Ð»Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð°.

## ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹

Ð­Ñ‚Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ Ñ€ÐµÐ°Ð³Ð¸Ñ€ÑƒÑŽÑ‚ Ð½Ð° Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹.

### onBotCommand()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½ÑƒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ, Ð½Ð°Ñ‡Ð¸Ð½Ð°ÑŽÑ‰ÑƒÑŽÑÑ ÑÐ¾ ÑÐ»ÐµÑˆÐ° (`/`). ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `/start` Ð¸Ð»Ð¸ `/help`.

**Ð¡Ð¸Ð³Ð½Ð°Ñ‚ÑƒÑ€Ð°:**
```php
public function onBotCommand(string $id, array|string $command = null): Action
```

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**

```php
// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ /start
$bot->onBotCommand('start', '/start')->func(function (ZG $tg) {
    $tg->msg('ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ð±Ð¾Ñ‚')->send();
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð¼ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: /gift user123)
// ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð°Ñ€ÑÑÑ‚ÑÑ Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‚ÑÑ Ð² Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ
$bot->onBotCommand('gift', '/gift')->func(function (ZG $tg, $username) {
    $tg->msg("ÐŸÐ¾Ð´Ð°Ñ€Ð¾Ðº Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ {$username}!")->send();
});
```

### onCommand()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ñ ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¼ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÐ° (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `!`, `.`, `+`). ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¼Ð¾Ñ‰Ð½Ñ‹Ðµ Ð¿Ð»ÐµÐ¹ÑÑ…Ð¾Ð»Ð´ÐµÑ€Ñ‹ Ð´Ð»Ñ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²:
* `%s` â€” ÑÑ‚Ñ€Ð¾ÐºÐ° (Ð·Ð°Ñ…Ð²Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð²ÐµÑÑŒ Ñ‚ÐµÐºÑÑ‚ Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð°).
* `%w` â€” ÑÐ»Ð¾Ð²Ð¾ (Ð¾Ð´Ð½Ð¾ ÑÐ»Ð¾Ð²Ð¾ Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð¾Ð²).
* `%n` â€” Ñ‡Ð¸ÑÐ»Ð¾ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ†Ð¸Ñ„Ñ€Ñ‹).

**Ð¡Ð¸Ð³Ð½Ð°Ñ‚ÑƒÑ€Ð°:**
```php
public function onCommand(string $id, array|string $command = null): Action
```

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**

```php
// ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° !ping
$bot->onCommand('ping', '!ping')->text('Pong!');

// ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð±Ð°Ð½Ð°: !ban 12345 Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°
$bot->onCommand('ban', '!ban {user_id} {reason}')
    ->func(function(ZG $tg, $user_id, string $reason) {
        // $user_id = 12345 (int|string)
        // $reason = "Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð°" (string)
        $tg->msg("ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {$user_id} Ð·Ð°Ð±Ð°Ð½ÐµÐ½. ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: {$reason}")->send();
    });
```

### onStart()

Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº Ð´Ð»Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ `/start`.

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**
```php
$bot->onStart()->text('Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð±Ð¾Ñ‚Ð°!');
```

### onReferral()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ñ‚ Ð¿Ð¾ Ñ€ÐµÑ„ÐµÑ€Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÑÑÑ‹Ð»ÐºÐµ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `t.me/bot?start=ref123`).

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**
```php
$bot->onReferral()->func(function (ZG $tg, $refCode) {
    $tg->msg("Ð’Ñ‹ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ñ ÐºÐ¾Ð´Ð¾Ð¼: {$refCode}")->send();
});
```

---

## Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ

### onText()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸ **Ñ‚Ð¾Ñ‡Ð½Ð¾Ð¼ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¸** Ñ‚ÐµÐºÑÑ‚Ð°. Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÐºÐ½Ð¾Ð¿Ð¾Ðº Reply-ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹.

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**

```php
// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Reply-ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñƒ
$bot->onBotCommand('menu', '/menu')
    ->text('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿ÑƒÐ½ÐºÑ‚:')
    ->kbd([
        ['â„¹ï¸ Ðž Ð½Ð°Ñ', 'ðŸ“ž ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹']
    ]);

// ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "â„¹ï¸ Ðž Ð½Ð°Ñ"
$bot->onText('about', 'â„¹ï¸ Ðž Ð½Ð°Ñ')
    ->text('ÐœÑ‹ â€” Ð»ÑƒÑ‡ÑˆÐ°Ñ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ñ!');
```

### onTextPreg()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚, ÐµÑÐ»Ð¸ Ñ‚ÐµÐºÑÑ‚ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚ Ñ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ð¼ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼. ÐÐ°Ð¹Ð´ÐµÐ½Ð½Ñ‹Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ (`matches`) Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‚ÑÑ Ð² Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ.

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**

```php
// ÐŸÐ¾Ð¸ÑÐº email Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¸
$bot->onTextPreg('email', '/[\w\.]+@[\w\.]+/')
    ->func(function (ZG $tg, $matches) {
        $email = $matches[0];
        $tg->msg("Email Ð¿Ñ€Ð¸Ð½ÑÑ‚: {$email}")->send();
    });
```

---

## ÐšÐ½Ð¾Ð¿ÐºÐ¸ (Callback Query)

ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ð¹ Ð½Ð° Inline-ÐºÐ½Ð¾Ð¿ÐºÐ¸.

Ð’Ð¾Ñ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ñ€Ð°Ð·Ð´ÐµÐ» Ð´Ð»Ñ **onCallback()**. Ð¯ Ð´Ð¾Ð±Ð°Ð²Ð¸Ð» Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ð»ÐµÐ¹ÑÑ…Ð¾Ð»Ð´ÐµÑ€Ð¾Ð² Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸Ñ… Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ. Ð­Ñ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð°Ñ Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð° Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ð¼ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼ (`onCallbackPreg`) Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÐºÐ½Ð¾Ð¿Ð¾Ðº.

### onCallback()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¸ `callback_data`. ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ ÐºÐ°Ðº **Ñ‚Ð¾Ñ‡Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ**, Ñ‚Ð°Ðº Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ **Ð¿Ð»ÐµÐ¹ÑÑ…Ð¾Ð»Ð´ÐµÑ€Ð¾Ð²** Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ð¸ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²:

*   `%n` â€” Ñ‡Ð¸ÑÐ»Ð¾ (Ñ†Ð¸Ñ„Ñ€Ñ‹).
*   `%w` â€” ÑÐ»Ð¾Ð²Ð¾ (Ð±ÑƒÐºÐ²Ñ‹ Ð¸ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð¾Ð²).
*   `%s` â€” ÑÑ‚Ñ€Ð¾ÐºÐ° (Ð²ÐµÑÑŒ Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸Ð¹ÑÑ Ñ…Ð²Ð¾ÑÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…).

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ 1: Ð¢Ð¾Ñ‡Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ**

```php
use ZenithGram\ZenithGram\Button;

// ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÑƒ
$bot->onBotCommand('test', '/test')
    ->text('ÐÐ°Ð¶Ð¼Ð¸ ÐºÐ½Ð¾Ð¿ÐºÑƒ:')
    ->inlineKbd([
        [Button::cb('ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ', 'profile_btn')]
    ]);

// ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ðµ
$bot->onCallback('profile_handler', 'profile_btn')
    ->func(function (ZG $tg) {
        $tg->answerCallbackQuery();
        $tg->msg("Ð­Ñ‚Ð¾ Ð²Ð°Ñˆ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ!")->send();
    });
```

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ 2: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð»ÐµÐ¹ÑÑ…Ð¾Ð»Ð´ÐµÑ€Ð¾Ð² (Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸)**

Ð­Ñ‚Ð¾ ÑƒÐ´Ð¾Ð±Ð½ÐµÐµ, Ñ‡ÐµÐ¼ Regex, ÐµÑÐ»Ð¸ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾ÑÑ‚Ð°Ñ.

```php
use ZenithGram\ZenithGram\Button;

// Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ñ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸
// Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° data: "action_ID_TYPE"
$bot->onBotCommand('actions', '/actions')
    ->text('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ:')
    ->inlineKbd([
        [Button::cb('Ð‘Ð°Ð½ User 55', 'ban_55_spam')],
        [Button::cb('Ð‘Ð°Ð½ User 77', 'ban_77_flood')]
    ]);

// Ð›Ð¾Ð²Ð¸Ð¼ Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½: ÑÐ»Ð¾Ð²Ð¾_Ñ‡Ð¸ÑÐ»Ð¾_ÑÐ»Ð¾Ð²Ð¾
$bot->onCallback('ban_handler', 'ban_{user_id}_{reason}')
    ->func(function (ZG $tg, string $user_id, string $reason) {
        // ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾Ð¿Ð°Ð´Ð°ÑŽÑ‚ Ð² Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð² Ð½ÑƒÐ¶Ð½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ
        // $user_id = 55
        // $reason = "spam"
        $tg->answerCallbackQuery($tg->getQueryId(), ['text' => "Ð—Ð°Ð±Ð°Ð½ÐµÐ½!"]);
        $tg->msg("ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ #{$user_id} Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½ Ð·Ð° {$reason}.")->send();
    });
```

### onCallbackPreg()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚, ÐµÑÐ»Ð¸ `callback_data` ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚ Ñ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ð¼ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼. ÐÐµÐ·Ð°Ð¼ÐµÐ½Ð¸Ð¼Ð¾ Ð´Ð»Ñ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ð¸ Ð¸Ð»Ð¸ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `buy_item_54`, `buy_item_55`).

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**

```php
use ZenithGram\ZenithGram\Button;

// Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²
$bot->onBotCommand('shop', '/shop')
    ->text('ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³:')
    ->inlineKbd([
        [Button::cb('ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ Ð¢Ð¾Ð²Ð°Ñ€ 1', 'buy_1')],
        [Button::cb('ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ Ð¢Ð¾Ð²Ð°Ñ€ 2', 'buy_2')]
    ]);

// ÐžÐ´Ð¸Ð½ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº
$bot->onCallbackPreg('buy_handler', '/^buy_(\d+)$/')
    ->func(function (ZG $tg, $itemId) {
        // $itemId Ð±ÑƒÐ´ÐµÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ ID Ñ‚Ð¾Ð²Ð°Ñ€Ð° (1 Ð¸Ð»Ð¸ 2)
        $tg->answerCallbackQuery(['text' => "Ð¢Ð¾Ð²Ð°Ñ€ #{$itemId} Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ"]);
    });
```

---

## Inline-Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹

### onInline()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° Ð»ÑŽÐ±Ð¾Ð¹ Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¹ Inline Query (ÐºÐ¾Ð³Ð´Ð° Ð±Ð¾Ñ‚Ð° Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÑŽÑ‚ Ñ‡ÐµÑ€ÐµÐ· `@botname`).

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**

```php
$bot->onInline()
    ->func(function(ZG $tg) {
        $query = $tg->getText(); // Ð¢ÐµÐºÑÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
        
        $results = [
            $tg->inline('article')
                ->id('1')
                ->title('Ð­Ñ…Ð¾')
                ->description("Ð’Ñ‹ Ð½Ð°Ð¿Ð¸ÑÐ°Ð»Ð¸: $query")
                ->text($query)
                ->create(),
        ];
        
        $tg->answerInlineQuery($results);
    });
```

---

## ÐœÐµÐ´Ð¸Ð° Ð¸ ÑÐµÑ€Ð²Ð¸ÑÐ½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ

Ð­Ñ‚Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ Ð½Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð² ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ñ (ÐºÑ€Ð¾Ð¼Ðµ ID Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð°), Ñ‚Ð°Ðº ÐºÐ°Ðº Ñ€ÐµÐ°Ð³Ð¸Ñ€ÑƒÑŽÑ‚ Ð½Ð° Ñ‚Ð¸Ð¿ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°.

| ÐœÐµÑ‚Ð¾Ð´             | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                                   |
|:------------------|:-------------------------------------------|
| `onPhoto`         | ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ                       |
| `onVideo`         | ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ð²Ð¸Ð´ÐµÐ¾                             |
| `onAudio`         | ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½ Ð°ÑƒÐ´Ð¸Ð¾Ñ„Ð°Ð¹Ð» (Ð¼ÑƒÐ·Ñ‹ÐºÐ°)                 |
| `onVoice`         | ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ               |
| `onVideoNote`     | ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½ "ÐºÑ€ÑƒÐ¶Ð¾Ñ‡ÐµÐº" (video note)            |
| `onDocument`      | ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½ Ñ„Ð°Ð¹Ð»/Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚                      |
| `onSticker`       | ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½ ÑÑ‚Ð¸ÐºÐµÑ€                             |
| `onEditedMessage` | ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð» ÑÐ²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ |

**ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ:**

```php
// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ Ñ„Ð¾Ñ‚Ð¾, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ñ€Ð¸ÑÑ‹Ð»Ð°ÐµÑ‚ ÑŽÐ·ÐµÑ€
$bot->onPhoto('photo_saver')->func(function (ZG $tg) {
    $fileId = File::getFileId($tg->getUpdate());
    $tg->msg("Ð¤Ð¾Ñ‚Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¾! ID: {$fileId}")->send();
});

// Ð ÐµÐ°ÐºÑ†Ð¸Ñ Ð½Ð° ÐºÑ€ÑƒÐ¶Ð¾Ñ‡ÐµÐº
$bot->onVideoNote()->text('ÐšÐ»Ð°ÑÑÐ½Ñ‹Ð¹ ÐºÑ€ÑƒÐ¶Ð¾Ñ‡ÐµÐº!');
```

### ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð² Ñ‡Ð°Ñ‚Ð°

Ð”Ð»Ñ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð²Ñ…Ð¾Ð´Ð° Ð¸ Ð²Ñ‹Ñ…Ð¾Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‚ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ `UserDto`.

```php
use ZenithGram\ZenithGram\Dto\UserDto;

// ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²
$bot->onNewChatMember()
    ->func(function (ZG $tg, UserDto ...$users) {
        foreach ($users as $user) {
            $name = $user->firstName;
            $tg->msg("Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ, {$name}!")->send();
        }
    });

// ÐŸÑ€Ð¾Ñ‰Ð°Ð½Ð¸Ðµ
$bot->onLeftChatMember()
    ->func(function (ZG $tg, UserDto $user) {
        $tg->msg("ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ {$user->firstName} Ð¿Ð¾ÐºÐ¸Ð½ÑƒÐ» Ñ‡Ð°Ñ‚.")->send();
    });
```

---

## Fallback (Ð ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸)

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚, ÐµÑÐ»Ð¸ Ð½Ð¸ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ð²Ñ‹ÑˆÐµÐ¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² Ð½Ðµ Ð¿Ð¾Ð´Ð¾ÑˆÐµÐ».

### onMessage()

Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° **Ð»ÑŽÐ±Ð¾Ðµ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ**, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð¾ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼Ð¸ Ð¸Ð»Ð¸ `onText`.

```php
$bot->onMessage()->text('Ð¯ Ð½Ðµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽ ÑÑ‚Ð¾Ñ‚ Ñ‚ÐµÐºÑÑ‚. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ /menu.');
```

### onDefault()

Ð¡Ð°Ð¼Ñ‹Ð¹ Ð½Ð¸Ð·ÐºÐ¸Ð¹ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚. Ð¡Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° **Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð»ÑŽÐ±Ð¾Ðµ** Ð½ÐµÐ¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ð¾Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ (Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ð¼ÐµÐ´Ð¸Ð°, ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¸ Ñ‚.Ð´.).

```php
$bot->onDefault()->func(function(ZG $tg) {
    error_log("ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ: " . print_r($tg->getUpdate(), true));
});
```